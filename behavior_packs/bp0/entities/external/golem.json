{"format_version":"1.17.0","minecraft:entity":{"description":{"identifier":"hfrlc:golem","is_summonable":true,"is_spawnable":true,"animations":{"attack_controller":"controller.animation.golem.attack_controller","stuck_failsafe":"controller.animation.golem.stuck_failsafe","tick":"animation.golem.tick","death":"animation.golem.death"},"scripts":{"animate":["tick",{"attack_controller":"!q.property('hfrlc:dead')"},{"stuck_failsafe":"!q.property('hfrlc:dead')"},{"death":"q.property('hfrlc:dead')"}]},"properties":{"hfrlc:emerged":{"type":"bool","client_sync":true,"default":false},"hfrlc:dead":{"type":"bool","client_sync":true,"default":false},"hfrlc:has_target":{"type":"bool","client_sync":true,"default":false},"hfrlc:rotation_locked":{"type":"bool","client_sync":true,"default":true},"hfrlc:rotation":{"type":"float","client_sync":true,"range":[-999.0,999.0],"default":0.01},"hfrlc:state":{"type":"enum","client_sync":true,"values":["none","emerging","preparing_attack","attacking","rolling"],"default":"none"},"hfrlc:attack_type":{"type":"enum","client_sync":true,"values":["none","right_attack","left_attack","roll","throw_tree"],"default":"none"},"hfrlc:phase":{"type":"enum","client_sync":true,"values":["phase_1","mid_phase","phase_2"],"default":"phase_1"},"hfrlc:stuck":{"type":"bool","client_sync":true,"default":false},"hfrlc:tree_thrown":{"type":"bool","client_sync":true,"default":false},"hfrlc:dancing":{"type":"bool","client_sync":true,"default":false},"hfrlc:roll_failsafe":{"type":"int","range":[0,1000],"default":0}}},"component_groups":{"hfrlc:despawn":{"minecraft:instant_despawn":{}},"hfrlc:find_target":{"minecraft:target_nearby_sensor":{"inside_range":100,"outside_range":100,"on_inside_range":{"event":"hfrlc:target_detected","target":"self"}}},"hfrlc:movement_off":{"minecraft:movement":{"value":0.0},"minecraft:behavior.look_at_target":{"priority":11,"look_distance":8}},"hfrlc:movement_on":{"minecraft:movement":{"value":0.25},"minecraft:behavior.look_at_target":{"priority":999,"look_distance":0}},"hfrlc:vulnerable":{"minecraft:damage_sensor":{"triggers":[{"cause":"all","deals_damage":true},{"cause":"freezing","deals_damage":false}]}},"hfrlc:invulnerable":{"minecraft:damage_sensor":{"triggers":[{"cause":"all","deals_damage":false}]}},"hfrlc:buried":{"minecraft:collision_box":{"width":0.0,"height":0.0},"minecraft:target_nearby_sensor":{"must_see":false,"inside_range":10,"outside_range":15,"on_inside_range":{"event":"hfrlc:start_emerging","target":"self"}}},"hfrlc:emerging":{"minecraft:collision_box":{"width":0.0,"height":0.0},"minecraft:behavior.emerge":{"duration":3.33,"on_done":{"event":"hfrlc:emerged","target":"self"}}},"hfrlc:emerged":{"minecraft:collision_box":{"width":2.4,"height":3.3},"minecraft:behavior.hurt_by_target":{"priority":0,"alert_same_type":false},"minecraft:behavior.random_stroll":{"priority":10,"speed_multiplier":1},"minecraft:environment_sensor":{"triggers":[{"event":"hfrlc:death","target":"self","filters":{"all_of":[{"test":"actor_health","value":1},{"test":"bool_property","domain":"hfrlc:dead","value":false}]}},{"event":"hfrlc:has_target","target":"self","filters":{"all_of":[{"test":"bool_property","domain":"hfrlc:has_target","value":false},{"test":"has_target","value":true}]}},{"event":"hfrlc:no_target","target":"self","filters":{"all_of":[{"test":"bool_property","domain":"hfrlc:has_target","value":true},{"test":"has_target","value":false}]}},{"event":"hfrlc:mid_phase","target":"self","filters":{"all_of":[{"test":"enum_property","domain":"hfrlc:phase","value":"phase_1"},{"test":"actor_health","operator":"<=","value":40}]}}]}},"hfrlc:right_attack":{"minecraft:behavior.delayed_attack":{"attack_duration":999999,"attack_once":true,"hit_delay_pct":1,"random_stop_interval":0,"reach_multiplier":0,"require_complete_path":true,"track_target":false},"minecraft:timer":{"time":[1,1],"looping":true,"time_down_event":{"event":"hfrlc:attempt_attack","target":"self"}}},"hfrlc:left_attack":{"minecraft:behavior.delayed_attack":{"attack_duration":999999,"attack_once":true,"hit_delay_pct":1,"random_stop_interval":0,"reach_multiplier":0,"require_complete_path":true,"track_target":false},"minecraft:timer":{"time":[1,3],"looping":true,"time_down_event":{"event":"hfrlc:attempt_attack","target":"self"}}},"hfrlc:roll":{"minecraft:behavior.delayed_attack":{"attack_duration":999999,"attack_once":true,"hit_delay_pct":1,"random_stop_interval":0,"reach_multiplier":0,"require_complete_path":true,"track_target":false},"minecraft:timer":{"time":2,"looping":true,"time_down_event":{"event":"hfrlc:prepare_attack","target":"self","filters":[{"test":"enum_property","domain":"hfrlc:state","value":"none"},{"test":"bool_property","domain":"hfrlc:stuck","value":false},{"test":"target_distance","operator":"<=","value":10}]}}},"hfrlc:throw_tree":{"minecraft:behavior.delayed_attack":{"attack_duration":999999,"attack_once":true,"hit_delay_pct":1,"random_stop_interval":0,"reach_multiplier":0,"require_complete_path":true,"track_target":false},"minecraft:timer":{"time":2,"looping":true,"time_down_event":{"event":"hfrlc:prepare_attack","target":"self","filters":[{"test":"enum_property","domain":"hfrlc:state","value":"none"},{"test":"bool_property","domain":"hfrlc:stuck","value":false},{"test":"target_distance","operator":"<=","value":16}]}}},"hfrlc:death":{"minecraft:collision_box":{"width":0.0,"height":0.0},"minecraft:behavior.look_at_target":{"priority":999,"look_distance":0},"minecraft:health":{"value":999,"min":0},"minecraft:behavior.random_stroll":{"priority":999,"speed_multiplier":0}}},"components":{"minecraft:type_family":{"family":["golem","mob","ram"]},"minecraft:experience_reward":{"on_death":"50"},"minecraft:loot":{"table":"loot_tables/golem.json"},"minecraft:is_hidden_when_invisible":{},"minecraft:follow_range":{"value":55,"max":55},"minecraft:knockback_resistance":{"value":1,"max":1},"minecraft:behavior.nearest_attackable_target":{"priority":0,"must_see":true,"reselect_targets":true,"within_radius":32,"entity_types":[{"filters":{"all_of":[{"test":"is_family","subject":"other","value":"player"}]},"max_dist":32}]},"minecraft:breathable":{"total_supply":15,"suffocate_time":-1,"inhale_time":3.75,"generates_bubbles":false},"minecraft:health":{"value":65,"min":1},"minecraft:attack":{"damage":12},"minecraft:navigation.walk":{"avoid_water":true,"avoid_damage_blocks":true,"blocks_to_avoid":[{"name":"minecraft:powder_snow"}]},"minecraft:jump.static":{},"minecraft:movement.basic":{},"minecraft:hurt_on_condition":{"damage_conditions":[{"filters":{"test":"in_lava","subject":"self","operator":"==","value":true},"cause":"lava","damage_per_tick":4}]},"minecraft:behavior.float":{"priority":0},"minecraft:behavior.look_at_target":{"priority":5,"look_distance":8},"minecraft:can_climb":{},"minecraft:conditional_bandwidth_optimization":{},"minecraft:pushable":{"is_pushable":false,"is_pushable_by_piston":true},"minecraft:persistent":{},"minecraft:physics":{}},"events":{"minecraft:entity_spawned":{"add":{"component_groups":["hfrlc:buried","hfrlc:movement_off","hfrlc:invulnerable"]}},"hfrlc:start_emerging":{"remove":{"component_groups":["hfrlc:buried"]},"add":{"component_groups":["hfrlc:emerging"]},"set_property":{"hfrlc:state":"emerging"}},"hfrlc:emerged":{"remove":{"component_groups":["hfrlc:emerging","hfrlc:movement_off","hfrlc:invulnerable"]},"add":{"component_groups":["hfrlc:emerged","hfrlc:movement_on","hfrlc:vulnerable"]},"set_property":{"hfrlc:state":"none","hfrlc:emerged":true,"hfrlc:rotation_locked":false},"trigger":"hfrlc:choose_attack"},"hfrlc:invulnerable":{"remove":{"component_groups":["hfrlc:vulnerable"]},"add":{"component_groups":["hfrlc:invulnerable"]}},"hfrlc:vulnerable":{"remove":{"component_groups":["hfrlc:invulnerable"]},"add":{"component_groups":["hfrlc:vulnerable"]}},"hfrlc:death":{"set_property":{"hfrlc:dead":true,"hfrlc:stuck":false,"hfrlc:state":"none","hfrlc:attack_type":"none"},"remove":{"component_groups":["hfrlc:emerging","hfrlc:emerged","hfrlc:movement_on","hfrlc:vulnerable","hfrlc:right_attack","hfrlc:left_attack","hfrlc:roll","hfrlc:throw_tree"]},"add":{"component_groups":["hfrlc:death","hfrlc:movement_off","hfrlc:invulnerable"]}},"hfrlc:despawn":{"remove":{"component_groups":["hfrlc:emerging","hfrlc:emerged","hfrlc:movement_on"]},"add":{"component_groups":["hfrlc:despawn","hfrlc:movement_off"]}},"hfrlc:movement_off":{"remove":{"component_groups":["hfrlc:movement_on"]},"add":{"component_groups":["hfrlc:movement_off"]}},"hfrlc:movement_on":{"remove":{"component_groups":["hfrlc:movement_off"]},"add":{"component_groups":["hfrlc:movement_on"]}},"hfrlc:choose_attack":{"remove":{"component_groups":["hfrlc:right_attack","hfrlc:left_attack","hfrlc:roll","hfrlc:throw_tree"]},"trigger":"hfrlc:movement_on","sequence":[{"filters":{"test":"enum_property","domain":"hfrlc:phase","value":"phase_1"},"randomize":[{"add":{"component_groups":["hfrlc:right_attack"]},"set_property":{"hfrlc:attack_type":"right_attack"},"weight":8},{"add":{"component_groups":["hfrlc:left_attack"]},"set_property":{"hfrlc:attack_type":"left_attack"},"weight":8}]},{"filters":{"test":"enum_property","domain":"hfrlc:phase","value":"mid_phase"},"add":{"component_groups":["hfrlc:throw_tree"]},"set_property":{"hfrlc:attack_type":"throw_tree"}},{"filters":{"test":"enum_property","domain":"hfrlc:phase","value":"phase_2"},"randomize":[{"add":{"component_groups":["hfrlc:right_attack"]},"set_property":{"hfrlc:attack_type":"right_attack"},"weight":8},{"add":{"component_groups":["hfrlc:left_attack"]},"set_property":{"hfrlc:attack_type":"left_attack"},"weight":8},{"add":{"component_groups":["hfrlc:roll"]},"set_property":{"hfrlc:attack_type":"roll"},"weight":4}]}]},"hfrlc:choose_ranged_attack":{"remove":{"component_groups":["hfrlc:right_attack","hfrlc:left_attack","hfrlc:roll","hfrlc:throw_tree"]},"add":{"component_groups":["hfrlc:roll"]},"set_property":{"hfrlc:attack_type":"roll"},"trigger":"hfrlc:movement_on"},"hfrlc:attempt_attack":{"sequence":[{"filters":[{"test":"enum_property","domain":"hfrlc:state","value":"none"},{"test":"bool_property","domain":"hfrlc:stuck","value":false},{"test":"target_distance","operator":"<=","value":5}],"trigger":"hfrlc:prepare_attack"},{"filters":[{"all_of":[{"test":"target_distance","operator":">=","value":8},{"test":"enum_property","domain":"hfrlc:phase","value":"phase_2"}]}],"trigger":"hfrlc:choose_ranged_attack"}]},"hfrlc:prepare_attack":{"sequence":[{"set_property":{"hfrlc:state":"preparing_attack"},"filters":{"test":"enum_property","domain":"hfrlc:state","value":"none"}}]},"hfrlc:attack_start":{"sequence":[{"remove":{"component_groups":["hfrlc:movement_on"]},"add":{"component_groups":["hfrlc:movement_off"]},"set_property":{"hfrlc:state":"attacking"},"filters":{"test":"enum_property","domain":"hfrlc:state","value":"preparing_attack"}}]},"hfrlc:attack_end":{"sequence":[{"remove":{"component_groups":["hfrlc:movement_off"]},"add":{"component_groups":["hfrlc:movement_on"]},"set_property":{"hfrlc:state":"none"},"trigger":"hfrlc:choose_attack"},{"filters":{"test":"bool_property","domain":"hfrlc:dancing","value":false},"set_property":{"hfrlc:rotation_locked":false}}]},"hfrlc:get_target":{"add":{"component_groups":["hfrlc:find_target"]}},"hfrlc:target_detected":{"remove":{"component_groups":["hfrlc:find_target"]},"queue_command":{"command":"scriptevent hfrlc:get_target","target":"target"}},"hfrlc:has_target":{"set_property":{"hfrlc:has_target":true,"hfrlc:dancing":false}},"hfrlc:no_target":{"remove":{"component_groups":["hfrlc:find_target"]},"set_property":{"hfrlc:has_target":false}},"hfrlc:mid_phase":{"set_property":{"hfrlc:phase":"mid_phase"}},"hfrlc:phase_2":{"set_property":{"hfrlc:phase":"phase_2"}},"hfrlc:start_dancing":{"set_property":{"hfrlc:dancing":true},"trigger":"hfrlc:movement_off"},"hfrlc:stop_dancing":{"set_property":{"hfrlc:dancing":false},"trigger":"hfrlc:movement_on"}}}}