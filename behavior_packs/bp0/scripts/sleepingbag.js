import{system,world}from"@minecraft/server";import{addScore,addEffect,setScore,getScore,w}from"./functions.js";import{Vector}from"./vector.js";export function sleepingBag_events(e,a){if("hfrlc:sleepingbag_loop"==a&&e.hasTag("start_game")){sleepingBag(e,getScore(e,"sleeping"))}}function sleepingBag(e,a){e.hasTag("sleepingbag")?(addScore(e,"sleeping",1),e.addTag("not_sleep"),a>1&&a<55&&e.camera.setCamera("minecraft:free",{location:{x:e.location.x,y:e.location.y+2,z:e.location.z},rotation:{x:a/4-30,y:e.location.y}}),15==a&&(e.inputPermissions.cameraEnabled=!1,e.inputPermissions.movementEnabled=!1,e.camera.fade({fadeTime:{fadeInTime:3,holdTime:1,fadeOutTime:1}})),55==a&&(setScore(e,"sleeping",0),e.teleport({x:e.location.x,y:e.location.y+2,z:e.location.z}),e.camera.clear(),e.runCommandAsync("event entity @e[r=2,type=hfrlc:sleepingbag] desactive_ride"),world.setTimeOfDay(0),e.playSound("random.levelup"),e.inputPermissions.cameraEnabled=!0,e.inputPermissions.movementEnabled=!0,e.removeTag("sleepingbag"),e.removeTag("not_sleep"),system.runTimeout(()=>{addEffect(e,"instant_health",20,!1)},3))):e.isSleeping?(e.hasTag("sleep")||(e.addTag("sleep"),setScore(e,"sleeping",1)),a>=1&&a<45&&addScore(e,"sleeping",1),a>=45&&(setScore(e,"thirst",37800),setScore(e,"thermometer",6e3),setScore(e,"sleeping",0),system.runTimeout(()=>{addEffect(e,"instant_health",20,!1)},3))):(!e.isSleeping&&e.hasTag("sleep")||e.hasTag("not_sleep"))&&(setScore(e,"sleeping",0),e.removeTag("sleep"),e.removeTag("not_sleep"))}