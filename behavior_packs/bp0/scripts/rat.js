import{world,system}from"@minecraft/server";export const importantItems=new Set(["hfrlc:info_book","hfrlc:system_level","hfrlc:trinket_menu"]);export function onDamage(e,t){if(!e||"hfrlc:rat"!==e.typeId||!t||"minecraft:player"!==t.typeId)return;const r=t.getComponent("equippable")?.getEquipmentSlot("Mainhand"),n=r?.getItem();if(!n||e.getProperty("hfrlc:equipped_item")||importantItems.has(n.typeId))return;const o=n.amount??1,a=n.getComponent("durability")?.damage??0;r.setItem(void 0),e.runCommand(`replaceitem entity @s slot.weapon.mainhand 1 ${n.typeId} ${o} ${a}`),e.setProperty("hfrlc:equipped_item",!0),n.hasTag("minecraft:is_tool")||(e.setProperty("hfrlc:states","scape"),e.triggerEvent("hfrlc:run"))}