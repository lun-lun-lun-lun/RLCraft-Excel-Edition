import{system}from"@minecraft/server";import{secondsToTicks,randInt}from"./libs/utils";import{bVector3}from"./libs/better_vectors";export const DATA={id:"hfrlc:shogun",killed_check_delay:secondsToTicks(1),dancing:{anim_time:secondsToTicks(7.5),min_time:1,max_time:2}};export function onAttack(t){const{damagingEntity:e,hitEntity:n}=t;if(e.typeId===DATA.id){const t=n?.getComponent("minecraft:health"),i=e?.getRotation().y;t?.currentValue<=0&&(e?.setProperty("hfrlc:rotation",i),e?.setProperty("hfrlc:rotation_locked",!0),system.runTimeout(()=>{if(!e.getProperty("hfrlc:has_target")){e?.setDynamicProperty("hfrlc:target_dead",!0);const t=randInt(DATA.dancing.min_time,DATA.dancing.max_time)*DATA.dancing.anim_time;e?.triggerEvent("hfrlc:start_dancing"),system.runTimeout(()=>{e?.setRotation({x:0,y:i}),e?.triggerEvent("hfrlc:stop_dancing"),e?.setProperty("hfrlc:rotation_locked",!1)},t)}},DATA.killed_check_delay))}}export function onEvent(t){t.entity.typeId===DATA.id&&"hfrlc:death"===t.eventId&&t.entity&&t.entity?.isValid()&&!t.entity.getProperty("hfrlc:rotation_locked")&&(t.entity.setProperty("hfrlc:rotation",t.entity.getRotation().y),t.entity.setProperty("hfrlc:rotation_locked",!0))}