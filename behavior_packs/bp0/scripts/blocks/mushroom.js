import{BlockPermutation,GameMode,ItemStack}from"@minecraft/server";export function onStartup(e){e.blockComponentRegistry.registerCustomComponent("hfrlc:mushroom",{onPlayerInteract(e){onInteract(e)},onPlayerDestroy(e){onDestroy(e)}}),e.blockComponentRegistry.registerCustomComponent("hfrlc:mushrooms",{onPlace(e){onPlaceMushroom(e.block)}})}function onInteract(e){const{block:t,player:o}=e,n=o.getComponent("equippable"),r=n.getEquipment("Mainhand");if(r)if(r.typeId===t.typeId){o.playAnimation("animation.hfrlc.use_item");const a=t.permutation,m=a.getState("hfrlc:growth_stage");if(t.dimension.playSound("mob.slime.big",t.center()),m<=2){e.cancel=!0;const i=m+1,c=a.withState("hfrlc:growth_stage",i);t.setPermutation(c),o.getGameMode()!==GameMode.creative&&(r.amount>1?(r.amount-=1,n.setEquipment("Mainhand",r)):n.setEquipment("Mainhand",void 0))}}else e.cancel}function onDestroy(e){const{dimension:t,block:o,destroyedBlockPermutation:n,player:r}=e;if(r.getGameMode()!==GameMode.survival&&r.getGameMode()!==GameMode.adventure)return;const a={"hfrlc:brown_mushroom":"minecraft:brown_mushroom","hfrlc:red_mushroom":"minecraft:red_mushroom"},m=n.getState("hfrlc:growth_stage");let i=1;if(1===m?i=2:2===m?i=3:3===m?i=4:4===m&&(i=5),i>0){let e=new ItemStack(a[n.type.id],i);t.spawnItem(e,o.location)}}function onPlaceMushroom(e){const t=BlockPermutation.resolve(e.typeId,{...e.permutation.getAllStates(),"hfrlc:growth_stage":Math.floor(6*Math.random())+1});e.setPermutation(t)}