import{ItemStack,GameMode}from"@minecraft/server";const FLOWER_BED={"hfrlc:arctic_flowers":"use.moss","hfrlc:arid_flowers":"use.moss","hfrlc:tropical_flowers":"use.moss"};export function onStartup(e){e.blockComponentRegistry.registerCustomComponent("hfrlc:flower_bed",{onPlayerInteract(e){onInteract(e)},onPlayerDestroy(e){onDestroy(e)}})}function onInteract(e){const{block:t,player:n}=e;if(!Object.keys(FLOWER_BED).includes(t.typeId))return;const{x:o,y:a,z:i}=t.location,r=n.getComponent("equippable"),c=r.getEquipment("Mainhand");if(c)if(c.typeId===t.typeId&&Object.keys(FLOWER_BED).includes(c.typeId)||"minecraft:bone_meal"===c.typeId){n.playAnimation("animation.hfrlc.use_item");const s=t.permutation,m=s.getState("hfrlc:growth_stage");if(t.dimension.playSound(FLOWER_BED[t.typeId],t.center()),"minecraft:bone_meal"!==c.typeId||3!==m||Object.keys(FLOWER_BED).includes(c.typeId)){if(m<=2){e.cancel=!0;const l=m+1,d=s.withState("hfrlc:growth_stage",l);t.setPermutation(d),"minecraft:bone_meal"===c.typeId&&t.dimension.spawnParticle("minecraft:crop_growth_emitter",{x:o+.5,y:a+.5,z:i+.5}),n.getGameMode()!==GameMode.creative&&(c.amount>1?(c.amount-=1,r.setEquipment("Mainhand",c)):r.setEquipment("Mainhand",void 0))}}else{t.dimension.spawnParticle("minecraft:crop_growth_emitter",{x:o+.5,y:a+.5,z:i+.5});const s=new ItemStack(t.typeId,1);t.dimension.spawnItem(s,{x:o+.5,y:a+.5,z:i+.5}),n.getGameMode()!==GameMode.creative&&(c.amount>1?(c.amount-=1,r.setEquipment("Mainhand",c)):r.setEquipment("Mainhand",void 0)),e.cancel=!0}}else e.cancel}function onDestroy(e){const{dimension:t,block:n,destroyedBlockPermutation:o,player:a}=e;if(a.getGameMode()!==GameMode.survival&&a.getGameMode()!==GameMode.adventure)return;const i=o.getState("hfrlc:growth_stage");let r=1;if(1===i?r=2:2===i?r=3:3===i&&(r=4),r>0){let e=new ItemStack(o.type.id,r);t.spawnItem(e,n.location)}}