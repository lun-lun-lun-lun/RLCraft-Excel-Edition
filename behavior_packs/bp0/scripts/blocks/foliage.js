import{BlockPermutation,ItemStack,EquipmentSlot}from"@minecraft/server";export function onStartup(t){t.blockComponentRegistry.registerCustomComponent("hfrlc:clover",{onPlace(t){onPlaceClover(t.block)}}),t.blockComponentRegistry.registerCustomComponent("hfrlc:grass",{onPlace(t){onPlaceGrass(t.block)}}),t.blockComponentRegistry.registerCustomComponent("hfrlc:double_grass",{onPlace(t){onPlaceDoubleGrass(t.block)}}),t.blockComponentRegistry.registerCustomComponent("hfrlc:cactus",{onPlace(t){onPlaceCactus(t.block)}}),t.blockComponentRegistry.registerCustomComponent("hfrlc:pebble",{onPlace(t){onPlacePebble(t.block)}}),t.blockComponentRegistry.registerCustomComponent("hfrlc:rick_click_pickup",{onPlayerInteract(t){pickUpOnInteract(t)}}),t.blockComponentRegistry.registerCustomComponent("hfrlc:starfish",{onPlace(t){onPlaceStarfish(t.block)}})}function onPlaceClover(t){const e=BlockPermutation.resolve(t.typeId,{...t.permutation.getAllStates(),"hfrlc:growth_stage":Math.floor(4*Math.random())+1});t.setPermutation(e)}function onPlaceGrass(t){const e=BlockPermutation.resolve(t.typeId,{...t.permutation.getAllStates(),"hfrlc:variant":Math.floor(3*Math.random())+1});t.setPermutation(e)}function onPlaceDoubleGrass(t){const e=BlockPermutation.resolve(t.typeId,{...t.permutation.getAllStates(),"hfrlc:upper_block_bit":Math.random()<.5});t.setPermutation(e)}function onPlaceCactus(t){const e=BlockPermutation.resolve(t.typeId,{...t.permutation.getAllStates(),"hfrlc:growth_stage":Math.floor(3*Math.random())+1});t.setPermutation(e)}function onPlacePebble(t){const e=BlockPermutation.resolve(t.typeId,{...t.permutation.getAllStates(),"hfrlc:variant":Math.floor(4*Math.random())+1});t.setPermutation(e)}function pickUpOnInteract(t){const{block:e,player:o}=t;if(o.isSneaking)return;let n=e.getItemStack(1);"hfrlc:flint_pebble"===e.typeId&&(n=new ItemStack("minecraft:flint",1));const r=o.getComponent("minecraft:inventory")?.container,a=o.getComponent("minecraft:equippable").getEquipment(EquipmentSlot.Mainhand);let l=!1;if(a&&a.typeId!==n.typeId)if(r.emptySlotsCount>0);else for(let t=0;t<r.size;t++){let e=r.getItem(t);if(e&&e?.typeId===n.typeId){l=!0;break}}else l=!0;l?r.addItem(n):o.dimension.spawnItem(n,e.center()),o.dimension.playSound("random.pop",e.center(),{volume:1,pitch:1}),e.setType("minecraft:air")}function onPlaceStarfish(t){const e=BlockPermutation.resolve(t.typeId,{...t.permutation.getAllStates(),"hfrlc:variant":Math.floor(3*Math.random())+1});t.setPermutation(e)}