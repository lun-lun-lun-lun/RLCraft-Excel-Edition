import{world,system}from"@minecraft/server";import{Vector}from"./vector";const TAIL_DAMAGE=8,previousYaw=new Map;export function events(o,t){if("hfrlc:sea_serpent"!==o.typeId)return;const e=o.dimension;if("hfrlc:on_yaw"===t){const t=o.getRotation().y.toFixed(1);if(t!==previousYaw.get(`${o.id}`)){previousYaw.set(`${o.id}`,t);const c=2,r=2,a=Vector.getLocalCoords(o,{x:-r,y:-c,z:-10}),n=Vector.getLocalCoords(o,{x:r,y:c,z:-2}),i=e.getPlayers({location:n,volume:new Vector(a.localX,a.localY,a.localZ)});for(const t of i){const e=Vector.subtract(t.location,o.location);t.applyDamage(8,{cause:"entityAttack",damagingEntity:o}),t.applyKnockback(e.x,e.z,4,.3)}}}"hfrlc:death"===t&&previousYaw.delete(`${o.id}`)}