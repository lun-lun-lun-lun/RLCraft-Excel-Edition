import{world,system}from"@minecraft/server";import*as utilFunctions from"./functions.js";const cooldownString=new Map;export function events(t,n){if("hfrlc:giant_snail"!==t.typeId&&"hfrlc:mini_snail"!==t.typeId)return;const{dimension:i,location:o}=t;if("minecraft:entity_spawned"===n&&"hfrlc:giant_snail"===t.typeId)for(let n=0;n<4;n++){const n=utilFunctions.getPositionsInRadius(i,o,3,1),r=Array.from(n)[0];i.spawnEntity("hfrlc:mini_snail",r).setDynamicProperty("hfrlc:parent",t.id)}if("hfrlc:on_hide"===n&&"hfrlc:mini_snail"===t.typeId){const n=t.getDynamicProperty("hfrlc:parent"),o=t.id,r=cooldownString.get(`${o}`);if(n&&!r){const r=i.getEntities({location:t.location,type:"hfrlc:giant_snail",maxDistance:40});let e;for(const t of r)if(t.id===n){e=t;break}e||t.triggerEvent("hfrlc:scape"),cooldownString.set(`${o}`,!0),system.runTimeout(()=>{cooldownString.delete(`${o}`)},Math.floor(26*Math.random())+15)}}}